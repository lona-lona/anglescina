<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angle≈°ƒçina - Drejƒçevo uƒçenje</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background-color: #f4f7f6; padding: 20px; color: #333; margin-top: 80px; }
        .glavni-meni { position: fixed; top: 0; left: 0; width: 100%; background-color: #2c3e50; padding: 10px 0; display: flex; justify-content: center; gap: 10px; z-index: 1000; }
        .btn-navigacija { background-color: #3498db; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; }
        .btn-domov { background-color: #95a5a6; }
        .kartica { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: inline-block; min-width: 350px; max-width: 500px; }
        .meni { display: flex; flex-direction: column; gap: 15px; }
        .sklop-vsebnik { background: #f9f9f9; padding: 15px; border-radius: 12px; border: 2px solid #eee; position: relative; }
        .statistika-tekst { font-size: 0.95em; color: #7f8c8d; margin-top: 8px; font-weight: bold; }
        .beseda-izpis { font-size: 2.5em; font-weight: bold; color: #3498db; margin: 10px 0; }
        .emoji-prikaz { font-size: 4em; display: block; height: 1.2em; margin-bottom: 5px; }
        .btn-glavni { background-color: #3498db; color: white; width: 85%; margin-top: 10px; }
        input { padding: 12px; font-size: 1.2em; width: 80%; border: 2px solid #ddd; border-radius: 8px; outline: none; }
        button { padding: 12px 20px; font-size: 1em; cursor: pointer; border-radius: 8px; border: none; margin: 5px; font-weight: bold; transition: 0.2s; }
        .btn-namig { background-color: #a2d2a2; color: #2d5a2d; }
        .btn-preskoci { background-color: #bdc3c7; color: #2c3e50; }
        .btn-reset { background-color: #eeeeee; color: #777; font-size: 0.75em; padding: 5px 10px; margin-top: 10px; border: 1px solid #ccc; }
        .skrito { display: none; }
        .oznaka-ok { color: #27ae60; }
        .oznaka-napaka { color: #e74c3c; }
        .pohvala-tekst { color: #f39c12; font-style: italic; font-size: 1.2em; display: block; margin-top: 5px; }
        .progres-bar { height: 10px; background: #e0e0e0; border-radius: 5px; margin-top: 10px; overflow: hidden; }
        .progres-polnilo { height: 100%; background: #27ae60; transition: width 0.5s; }
        #ploskanje { font-size: 5em; display: block; margin: 10px 0; }
        #namig-tekst { letter-spacing: 2px; font-family: monospace; font-size: 1.2em; font-weight: bold; color: #2d5a2d; background: #e8f5e8; padding: 10px; border-radius: 8px; display: inline-block; margin-top: 10px; }
        .lovec-besed { color: #e67e22; font-weight: bold; letter-spacing: 0px; margin: 0 10px; }
    </style>
</head>
<body>

    <div class="glavni-meni">
        <button class="btn-navigacija btn-domov" onclick="nazajNaMeni()">üè† Domov</button>
    </div>

    <div class="kartica">
        <div id="zaslon-izbira">
            <h2>≈Ωivijo Drejc, kaj bova danes vadila?</h2>
            <div id="seznam-sklopov" class="meni"></div>
        </div>

        <div id="zaslon-kviz" class="skrito">
            <div id="ime-sklopa" style="font-weight: bold; color: #95a5a6; text-transform: uppercase; font-size: 0.8em;"></div>
            <div id="emoji-prostor" class="emoji-prikaz"></div>
            <div class="beseda-izpis" id="slo-beseda">---</div>
            <input type="text" id="vnos" placeholder="Vpi≈°i angle≈°ko..." autocomplete="off">
            <br><br>
            <button class="btn-glavni" onclick="preveri()">PREVERI</button><br>
            <button class="btn-namig" onclick="prikaziNamig()">Namig (+ƒçrka)</button>
            <button class="btn-preskoci" onclick="preskoci()">Preskoƒçi</button>
            <div id="sporocilo" style="margin-top: 15px; min-height: 80px; font-weight: bold;"></div>
        </div>

        <div id="zaslon-konec" class="skrito">
            <div id="ploskanje" class="skrito">üëè</div>
            <h2 id="koncni-naslov-sklopa">Sklop konƒçan!</h2>
            <div id="koncna-statistika" style="font-size: 1.2em; margin-bottom: 20px;"></div>
            <button class="btn-glavni" onclick="nazajNaMeni()">NAZAJ NA SEZNAM</button>
        </div>
    </div>

    <script>
        const pohvale = ["Bravo Drejc!", "Dobro ti gre!", "Woohooo obvlada≈°!", "Se ≈æe pozna da vadi≈°!", "Great job!", "Car! Vedno bolje.", "Vaja dela super mojstra!", "Raztura≈°!", "Kmalu bo≈° pravi Angle≈æ!"];

        const emojiMapa = {
            "BRUSH TEETH": "üßº", "BRUSH MY TEETH": "üßº", "CYCLE": "üö≤", "GET DRESSED": "üëï", "GO TO BED": "üõå", "HAVE A SHOWER": "üöø",
            "AN ARMCHAIR": "ü™ë", "A BIRDCAGE": "ü¶ú", "A BISCUIT TIN": "üç™", "A BOOKSHELF": "üìö", "A COAT": "üß•", 
            "A CRASH HELMET": "‚õëÔ∏è", "A CUPBOARD": "üóÑÔ∏è", "CUPS": "‚òï", "A DRAWER": "üìÇ", "A FISH-TANK": "üê†", 
            "A GLOBE": "üåç", "A HAIR-DRIER": "üí®", "A PLANT": "üåø", "A RACKET": "üéæ", "A SUITCASE": "üíº", 
            "THE EARTH": "üåé", "TRAINERS": "üëü", "A WARDROBE": "üëó", "A WASTE-PAPER BASKET": "üóëÔ∏è", "A WORKOUT MAT": "üßò",
            "A BEACH": "üèñÔ∏è", "A BEARD": "üßî", "A COMIC BOOK": "üìö", "A GARDEN GNOME": "üçÑ", "GARDEN GNOMES": "üçÑ", "A LIBRARY": "üèõÔ∏è", 
            "SAND": "üèñÔ∏è", "A TYPEWRITER": "‚å®Ô∏è", "STAMPS": "‚úâÔ∏è", "COLLECT STAMPS": "‚úâÔ∏è", "SHELLS": "üêö", "DOLLS": "üëß", 
            "POSTCARDS": "üìÆ", "BADGES": "üèÖ", "COLLECT BADGES": "üèÖ", "STICKERS": "üè∑Ô∏è", "COLLECT STICKERS": "üè∑Ô∏è", 
            "COINS": "üí∞", "COLLECT COINS": "üí∞", "PENS": "üñäÔ∏è", "BUTTONS": "üîò", "KEY RINGS": "üîë", "KEYRINGS": "üîë",
            "WATCH TV": "üì∫", "READ A BOOK": "üìñ", "A COOKER": "üç≥", "A SINK": "üö∞", "A CEILING": "üè†", "A WALL": "üè†", 
            "A SNOWFLAKE": "‚ùÑÔ∏è", "A SNOWMAN": "‚òÉÔ∏è", "A GINGERBREAD MAN": "üç™", "A GIFT": "üéÅ", "REINDEER": "ü¶å", 
            "A REINDEER": "ü¶å", "A SLEIGH": "üõ∑", "PINBALL MACHINES": "üïπÔ∏è", "PIG FIGURINES": "üê∑", "STINGING NETTLES": "ajsi üåø"
        };

        const osnovniPodatki = {
            "Anna's typical day": [{slo: "PO", ang: "AFTER"},{slo: "VEDNO", ang: "ALWAYS"},{slo: "PRED", ang: "BEFORE"},{slo: "OBNA≈†ATI SE", ang: "BEHAVE"},{slo: "GRISTI SI NOHTE", ang: "BITE NAILS"},{slo: "UMIVATI SI ZOBE", ang: "BRUSH TEETH"},{slo: "KLEPETATI S PRIJATELJI", ang: "CHAT WITH FRIENDS"},{slo: "KOLESARITI", ang: "CYCLE"},{slo: "ZGODAJ", ang: "EARLY"},{slo: "ZGODNJA PTICA", ang: "AN EARLY BIRD"},{slo: "ZBE≈ΩATI", ang: "ESCAPE"},{slo: "HRANITI", ang: "FEED"},{slo: "OBLEƒåI SE", ang: "GET DRESSED"},{slo: "USTATI", ang: "GET UP"},{slo: "ITI V POSTELJO", ang: "GO TO BED"},{slo: "ITI SPAT", ang: "GO TO SLEEP"},{slo: "SKORAJ NIKOLI", ang: "HARDLY EVER"},{slo: "TU≈†IRATI SE", ang: "HAVE A SHOWER"},{slo: "IMETI VEƒåERJO/VEƒåERJATI", ang: "HAVE DINNER"},{slo: "OBJETI", ang: "HUG"},{slo: "ZAPUSTITI DOM", ang: "LEAVE HOME"},{slo: "POLNOƒå", ang: "MIDNIGHT"},{slo: "NIKOLI", ang: "NEVER"},{slo: "NOƒåNA PTICA", ang: "A NIGHT OWL"},{slo: "POGOSTO", ang: "OFTEN"},{slo: "PAKIRANO KOSILO", ang: "A PACKED LUNCH"},{slo: "STRUPEN", ang: "POISONOUS"},{slo: "HITER", ang: "QUICK"},{slo: "REDKO", ang: "RARELY"},{slo: "≈†OLSKA MENZA", ang: "A SCHOOL CANTEEN"},{slo: "VƒåASIH", ang: "SOMETIMES"},{slo: "GOVORITI RESNICO", ang: "TELL THE TRUTH"},{slo: "PISATI SPOROƒåILO PRIJATELJEM", ang: "TEXT FRIENDS"},{slo: "POTEM", ang: "THEN"},{slo: "POD ZEMLJO", ang: "UNDERGROUND"},{slo: "OBIƒåAJNO", ang: "USUALLY"},{slo: "ZBUDITI SE", ang: "WAKE UP"},{slo: "BREZ", ang: "WITHOUT"},{slo: "TELOVADITI", ang: "WORK OUT"},{slo: "ZASPATI", ang: "FALL ASLEEP"},{slo: "ZAJTRK", ang: "BREAKFAST"},{slo: "KOSILO", ang: "LUNCH"},{slo: "ZAJTRK IN KOSILO OBENEM", ang: "BRUNCH"},{slo: "SPROSTITI SE", ang: "TO RELAX"},{slo: "V SPODNJEM NADSTROPJU", ang: "DOWNSTAIRS"},{slo: "ƒåETRTINA", ang: "A QUARTER"},{slo: "NA≈†EMITI SE ZA PUSTA", ang: "TO DRESS UP"},{slo: "DELATI DOMAƒåO NALOGO", ang: "DO HOMEWORK"},{slo: "POSLU≈†ATI GLASBO", ang: "LISTEN TO MUSIC"},{slo: "KONEC POUKA", ang: "THE END OF THE SCHOOL DAY"},{slo: "KONEC", ang: "THE END"},{slo: "GLEDATI TV", ang: "WATCH TV"},{slo: "BRATI KNJIGO", ang: "READ A BOOK"},{slo: "PRIPRAVITI ≈†OLSKO TORBO", ang: "PACK MY SCHOOL BAG"},{slo: "IMETI NOGOMETNI TRENING", ang: "HAVE FOOTBALL PRACTICE"}],
            "Linda's calculator": [{slo: "NAD", ang: "ABOVE"},{slo: "NASLANJAƒå", ang: "AN ARMCHAIR"},{slo: "ZA", ang: "BEHIND"},{slo: "MED", ang: "BETWEEN"},{slo: "KLETKA ZA PTICE", ang: "A BIRDCAGE"},{slo: "≈†KATLA S PI≈†KOTI", ang: "A BISCUIT TIN"},{slo: "KNJI≈ΩNA POLICA", ang: "A BOOKSHELF"},{slo: "PLA≈†ƒå", ang: "A COAT"},{slo: "ALI BI LAHKO?", ang: "COULD YOU?"},{slo: "ƒåELADA", ang: "A CRASH HELMET"},{slo: "CRKLJATI SE", ang: "CUDDLE"},{slo: "OMARICA", ang: "A CUPBOARD"},{slo: "LONƒåKI", ang: "CUPS"},{slo: "PREDALNIK", ang: "A DRAWER"},{slo: "RAZISKOVATI", ang: "EXPLORE"},{slo: "AKVARIJ", ang: "A FISH-TANK"},{slo: "TLA", ang: "THE FLOOR"},{slo: "GALAKSIJA", ang: "A GALAXY"},{slo: "GLOBUS", ang: "A GLOBE"},{slo: "FEN", ang: "A HAIR-DRIER"},{slo: "POGLEDATI", ang: "HAVE A LOOK"},{slo: "POHOD", ang: "A HIKE"},{slo: "PRED", ang: "IN FRONT OF"},{slo: "BLIZU", ang: "NEAR"},{slo: "ZRAVEN / POLEG / TIK OB", ang: "NEXT TO"},{slo: "OPAZITI", ang: "NOTICE"},{slo: "ZUNAJ", ang: "OUTSIDE"},{slo: "MESTO", ang: "A PLACE"},{slo: "RO≈ΩA V LONƒåKU", ang: "A PLANT"},{slo: "LOPAR", ang: "A RACKET"},{slo: "POƒåIVALNIK", ang: "A RESTING CHAIR"},{slo: "GEO TRIKOTNIK", ang: "A SET SQUARE"},{slo: "KOVƒåEK", ang: "A SUITCASE"},{slo: "ZEMLJA", ang: "THE EARTH"},{slo: "SUPERGE", ang: "TRAINERS"},{slo: "POD", ang: "UNDER"},{slo: "OMARA", ang: "A WARDROBE"},{slo: "KO≈† ZA SMETI", ang: "A WASTE-PAPER BASKET"},{slo: "KAK≈†NO OLAJ≈†ANJE!", ang: "WHAT A RELIEF"},{slo: "PODLOGA ZA TELOVADBO", ang: "A WORKOUT MAT"}],
            "Collections": [{slo: "VSE VRSTE", ang: "ALL SORTS"},{slo: "SPATI", ang: "ASLEEP"},{slo: "PLA≈ΩA", ang: "A BEACH"},{slo: "BRADA (KOSMATA)", ang: "A BEARD"},{slo: "LOVITI", ang: "CHASE"},{slo: "PLEZATI", ang: "CLIMB"},{slo: "STRIP", ang: "A COMIC BOOK"},{slo: "JOKATI / VZKLIKNITI", ang: "CRY"},{slo: "PRIJETNO", ang: "ENJOYABLE"},{slo: "≈†E POSEBEJ, ≈†E ZLASTI", ang: "ESPECIALLY"},{slo: "OGRAJA", ang: "A FENCE"},{slo: "FIGURICA", ang: "A FIGURINE"},{slo: "ZA OKRAS", ang: "FOR DECORATION"},{slo: "MAGNET ZA HLADILNIK", ang: "A FRIDGE MAGNET"},{slo: "VRTNI PALƒåEK / ≈†KRAT", ang: "A GARDEN GNOME"},{slo: "JEZIK", ang: "A LANGUAGE"},{slo: "KNJI≈ΩNICA", ang: "A LIBRARY"},{slo: "MO≈†KI", ang: "A MALE"},{slo: "DREMATI, KINKATI", ang: "NAP"},{slo: "NOƒåNA MORA", ang: "A NIGHTMARE"},{slo: "FLIPER", ang: "A PINBALL MACHINE"},{slo: "PRIJETEN", ang: "PLEASANT"},{slo: "≈†PIƒåAST / KONIƒåAST KLOBUK", ang: "A POINTY HAT"},{slo: "PRVO BERILO / ƒåITANKA", ang: "A PRIMER"},{slo: "VAROVATI", ang: "PROTECT"},{slo: "SPRAVITI NEKOGA V DOBRO VOLJO", ang: "PUT SOMEBODY IN A GOOD MOOD"},{slo: "PESEK", ang: "SAND"},{slo: "≈†OLSKO IGRI≈†ƒåO", ang: "A SCHOOL PLAYGROUND"},{slo: "KADITI PIPO", ang: "SMOKE A PIPE"},{slo: "KOPRIVA", ang: "A STINGING NETTLE"},{slo: "VREƒåKA SLADKORJA", ang: "A SUGAR PACKET"},{slo: "PRESENEƒåENJE", ang: "A SURPRISE"},{slo: "≈†VEDSKA PISATELJICA", ang: "A SWEDISH WRITER"},{slo: "PREVOD", ang: "A TRANSLATION"},{slo: "PISALNI STROJ", ang: "A TYPEWRITER"},{slo: "NENAVADEN", ang: "UNUSUAL"},{slo: "OBIƒåAJNO", ang: "USUALLY"},{slo: "OBISKOVALEC", ang: "A VISITOR"},{slo: "NAJVEƒåJI NA SVETU", ang: "THE WORLD'S LARGEST"}],
            "Linda and I like different things": [{slo: "MNO≈ΩICA LJUDI", ang: "A CROWD"},{slo: "HRUPEN PROSTOR", ang: "A NOISY PLACE"},{slo: "PELJATI PSA NA SPREHOD", ang: "TAKE A DOG FOR A WALK"},{slo: "KRASNO,ODLIƒåNO", ang: "TERRIFIC"},{slo: "OBA", ang: "BOTH"},{slo: "KREDA", ang: "CHALK"},{slo: "BITI RAZLIƒåEN KOT NOƒå IN DAN", ang: "TO BE DIFFERENT AS CHALK AND CHEESE"},{slo: "DRU≈ΩITI SE", ang: "HANG OUT"}],
            "House": [{slo: "KOT", ang: "A CORNER"},{slo: "STROP", ang: "A CEILING"},{slo: "STENA", ang: "A WALL"},{slo: "OKENSKA POLICA", ang: "A WINDOW SILL"},{slo: "UMIVALNIK", ang: "A SINK"},{slo: "PETI", ang: "SING"},{slo: "≈†TEDILNIK", ang: "A COOKER"},{slo: "IGRATI SE / IGRATI NA", ang: "PLAY"},{slo: "ZBIRATI", ang: "COLLECT"},{slo: "BRATI", ang: "READ"}],
            "Prepositions of place": [{slo: "NA", ang: "ON"},{slo: "V", ang: "IN"},{slo: "POD", ang: "UNDER"},{slo: "ZA", ang: "BEHIND"},{slo: "NAD", ang: "ABOVE"},{slo: "MED / VMES", ang: "BETWEEN"},{slo: "PRED", ang: "IN FRONT OF"},{slo: "POLEG / TIK OB", ang: "NEXT TO"},{slo: "BLIZU", ang: "NEAR"}],
            "Part of the day": [{slo: "ZJUTRAJ / DOPOLDNE", ang: "IN THE MORNING"},{slo: "POPOLDNE", ang: "IN THE AFTERNOON"},{slo: "ZVEƒåER", ang: "IN THE EVENING"},{slo: "PONOƒåI", ang: "AT NIGHT"}],
            "My life after school": [{slo: "IGRATI KO≈†ARKO", ang: "PLAY BASKETBALL"},{slo: "IGRATI NOGOMET", ang: "PLAY FOOTBALL"},{slo: "IGRATI TENIS", ang: "PLAY TENNIS"},{slo: "IGRATI PINKPONK", ang: "PLAY TABLE TENNIS"},{slo: "IGRATI HOKEJ", ang: "PLAY ICE HOCKEY"},{slo: "IGRATI ≈†AH", ang: "PLAY CHESS"},{slo: "IGRATI RAƒåUNALNI≈†KE IGRICE", ang: "PLAY COMPUTER GAMES"},{slo: "ZBIRATI OBESKE ZA KLJUƒåE", ang: "COLLECT KEYRINGS"},{slo: "ZBIRATI NALEPKE", ang: "COLLECT STICKERS"},{slo: "ZBIRATI ZNAMKE", ang: "COLLECT STAMPS"},{slo: "ZBIRATI KOVANCE", ang: "COLLECT COINS"},{slo: "ZBIRATI ZNAƒåKE/PRIPONKE", ang: "COLLECT BADGES"},{slo: "ZBIRATI NARODNE LUTKE", ang: "COLLECT NATIONAL DOLLS"},{slo: "BRATI KNJIGE", ang: "READ BOOKS"},{slo: "BRATI REVIJE", ang: "READ MAGAZINES"},{slo: "BRATI STRIPE", ang: "READ STRIPS"},{slo: "IGRATI NA KLAVIR", ang: "PLAY THE PIANO"},{slo: "IGRATI NA VIOLINO", ang: "PLAY THE VIOLIN"},{slo: "IGRATI NA KITARO", ang: "PLAY THE GUITAR"},{slo: "ITI SMUƒåATI", ang: "GO SKIING"},{slo: "ITI PLAVATI", ang: "GO SWIMMING"},{slo: "ITI KOLESARITI", ang: "GO CYCLING"},{slo: "ITI JADRATI", ang: "GO SAILING"},{slo: " VOZITI SE S KANUJEM", ang: "GO CANOEING"}],
            "How often?": [{slo: "VEDNO", ang: "ALWAYS"},{slo: "ENKRAT V DNEVU", ang: "ONCE A DAY"},{slo: "DVAKRAT V DNEVU", ang: "TWICE A DAY"},{slo: "TRIKRAT V DNEVU", ang: "THREE TIMES A DAY"},{slo: "OBIƒåAJNO, PONAVADI", ang: "USUALLY"},{slo: "POGOSTO", ang: "OFTEN"},{slo: "VƒåASIH", ang: "SOMETIMES"},{slo: "REDKO, TU PA TAM", ang: "RARELY"},{slo: "SKORAJ NIKOLI", ang: "HARDLY EVER"},{slo: "NIKOLI", ang: "NEVER"}],
            "What do you collect?": [{slo: "ZBIRATI", ang: "TO COLLECT"},{slo: "ZBIRKA", ang: "A COLLECTION"},{slo: "TUJINA", ang: "FOREIGN"},{slo: "100 / STO", ang: "A HUNDRED"},{slo: "≈†KATLICA Z V≈ΩIGALICAMI", ang: "A MATCHBOX"},{slo: "ZNAMKE", ang: "STAMPS"},{slo: "PODPISI ZNANIH OSEB", ang: "AUTOGRAPHS"},{slo: "FRNIKULE", ang: "MARBLES"},{slo: "≈†KOLJKE", ang: "SHELLS"},{slo: "LUTKE", ang: "DOLLS"},{slo: "RAZGLEDNICE", ang: "POSTCARDS"},{slo: "ZNAƒåKE, PRIPONKE", ang: "BADGES"},{slo: "NALEPKE", ang: "STICKERS"},{slo: "KOVANCI", ang: "COINS"},{slo: "PAPIRNATI PRTIƒåKI", ang: "PAPER NAPKINS"},{slo: "OBESKI ZA KLJUƒåE", ang: "KEY RINGS"},{slo: "KEMIƒåNI SVINƒåNIKI", ang: "PENS"},{slo: "GUMBI", ang: "BUTTONS"},{slo: "SLIKE OD", ang: "PICTURES OF"}],
            "WH... questions": [{slo: "KDO?", ang: "WHO"},{slo: "KJE?", ang: "WHERE"},{slo: "KAJ?", ang: "WHAT"},{slo: "ƒåIGAV?", ang: "WHOSE"},{slo: "KDAJ?", ang: "WHEN"},{slo: "ZAKAJ?", ang: "WHY"},{slo: "KAKO?", ang: "HOW"}],
            "My daily routine": [{slo: "VSTATI", ang: "GET UP"},{slo: "OBLEƒåI SE", ang: "GET DRESSED"},{slo: "IMETI ZAJTRK", ang: "HAVE BREAKFAST"},{slo: "UMITI ZOBE", ang: "BRUSH MY TEETH"},{slo: "PRIPRAVITI ≈†OLSKO TORBO", ang: "PACK MY SCHOOL BAG"},{slo: "ITI V ≈†OLO", ang: "GO TO SCHOOL"},{slo: "IMETI KOSILO", ang: "HAVE LUNCH"},{slo: "PRITI DOMOV", ang: "GET HOME"},{slo: "DRU≈ΩITI SE S PRIJATELJI", ang: "HANG OUT WITH FRIENDS"},{slo: "IGRATI RAƒåUNALNI≈†KE IGRICE", ang: "PLAY COMPUTER GAMES"},{slo: "DELATI DOMAƒåO NALOGO", ang: "DO HOMEWORK"},{slo: "POMAGATI STAR≈†EM", ang: "HELP PARENTS"},{slo: "IMETI NOGOMETNI TRENING", ang: "HAVE FOOTBALL PRACTICE"},{slo: "VEƒåERJATI", ang: "HAVE DINNER"},{slo: "GLEDATI TV", ang: "WATCH TV"},{slo: "POSLU≈†ATI GLASBO", ang: "LISTEN TO MUSIC"},{slo: "BRATI KNJIGE", ang: "READ BOOKS"},{slo: "BRSKATI PO INTERNETU", ang: "SURF THE INTERNET"},{slo: "PISATI SPOROƒåILO PRIJATELJEM", ang: "TEXT FRIENDS"},{slo: "TU≈†IRATI SE", ang: "HAVE A SHOWER"},{slo: "ITI V POSTELJO ZVEƒåER", ang: "GO TO BED IN THE EVENING"},{slo: "ITI SPAT", ang: "GO TO SLEEP"}],
            "A day in the life of Pippy S.": [{slo: "SAM/A", ang: "ALONE"},{slo: "PLEZATI", ang: "CLIMB"},{slo: "≈†TETI", ang: "COUNT"},{slo: "NI PO NJENO", ang: "DOESN'T GET HER OWN WAY"},{slo: "BITI POSEJAN S PEGAMI", ang: "DOTTED WITH FRECKLES"},{slo: "PRAVLJICA", ang: "A FAIRY-TALE"},{slo: "FINE DAME", ang: "FINE LADIES"},{slo: "ZGANJATI HRUP", ang: "FUSS"},{slo: "ITI NA SPREHOD", ang: "GO FOR A WALK"},{slo: "ZLATI KOSI", ang: "GOLD PIECES"},{slo: "VOTLO DREVO", ang: "A HOLLOW TREE"},{slo: "≈ΩENSKE SPODNJICE", ang: "KNICKERS"},{slo: "PALAƒåINKE", ang: "PANCAKES"},{slo: "KITKE/REPKI", ang: "PIGTAILS"},{slo: "RDEƒå KOT KORENƒåEK", ang: "RED AS A CARROT"},{slo: "KLOBASA", ang: "A SAUSAGE"},{slo: "PREMET/SALTO", ang: "A SOMERSAULT"},{slo: "≈ΩENSKE NOGAVICE", ang: "STOCKINGS"},{slo: "ƒåRTAST", ang: "STRIPED"},{slo: "IZMI≈†LJEVATI SI", ang: "TELL FIBS"},{slo: "VREƒåI/ZALUƒåATI", ang: "TOSS"},{slo: "DVAKRAT DALJ≈†I OD", ang: "TWICE AS LONG AS"}],
            "Christmas": [{slo: "BO≈ΩIƒå", ang: "CHRISTMAS"},{slo: "BO≈ΩIƒåEK", ang: "SANTA CLAUS"},{slo: "SNE≈ΩINKA", ang: "A SNOWFLAKE"},{slo: "SNE≈ΩAK", ang: "A SNOWMAN"},{slo: "OMELA", ang: "A MISTLETOE"},{slo: "PI≈†KOT MEDENJAK", ang: "A GINGERBREAD MAN"},{slo: "NOGAVICA", ang: "A STOCKING"},{slo: "PALƒåEK/≈†KRAT", ang: "AN ELF"},{slo: "PALƒåKI/≈†KRATKI", ang: "ELVES"},{slo: "SANI", ang: "A SLEIGH"},{slo: "SEVERNI JELEN", ang: "A REINDEER"},{slo: "OKRASKI ZA SMREKO", ang: "BAUBLES"},{slo: "OKRASNI TRAKOVI", ang: "TINSELS"},{slo: "DEKORACIJA BO≈ΩIƒåNA", ang: "ORNAMENTS"},{slo: "DARILO", ang: "A GIFT"}],
            "Annika and Tommy's typical day": [{slo: "PRI≈ΩGATI RADIO", ang: "TO TURN ON THE RADIO"},{slo: "ZVONEC ZAZVONI", ang: "THE BELL RINGS"},{slo: "PREVAL/SALTA", ang: "A SOMERSAULT"},{slo: "VOTLO DREVO", ang: "A HOLLOW TREE"},{slo: "PRAVLJICA", ang: "A FAIRY-TALE"}],
            "Anna's school play": [{slo: "≈†OLSKA PREDSTAVA", ang: "A SCHOOL PLAY"},{slo: "TA URA PREHITEVA", ang: "THAT CLOCK IS FAST"},{slo: "SKORAJ", ang: "ALMOST"},{slo: "NOBEN/NOBENA", ang: "NONE"},{slo: "DOVOLJ", ang: "ENOUGH"},{slo: "MUDI SE NAM", ang: "WE ARE IN A HURRY"},{slo: "BODI PREVIDEN", ang: "BE CAREFUL"}],
            "Days of the week - se z veliko zaƒçetnico v angle≈°ƒçini": [{slo: "PONEDELJEK", ang: "MONDAY"},{slo: "TOREK", ang: "TUESDAY"},{slo: "SREDA", ang: "WEDNESDAY"},{slo: "ƒåETRTEK", ang: "THURSDAY"},{slo: "PETEK", ang: "FRIDAY"},{slo: "SOBOTA", ang: "SATURDAY"},{slo: "NEDELJA", ang: "SUNDAY"}],
            "Months of the year - pi≈°ejo se z veliko zaƒçetnico v angle≈°ƒçini": [{slo: "JANUAR", ang: "January"},{slo: "FEBRUAR", ang: "February"},{slo: "MAREC", ang: "March"},{slo: "APRIL", ang: "April"},{slo: "MAJ", ang: "May"},{slo: "JUNIJ", ang: "June"},{slo: "JULIJ", ang: "July"},{slo: "AVGUST", ang: "August"},{slo: "SEPTEMBER", ang: "September"},{slo: "OKTOBER", ang: "October"},{slo: "NOVEMBER", ang: "November"},{slo: "DECEMBER", ang: "December"}],
            "Seasons of the year": [{slo: "POMLAD", ang: "SPRING"},{slo: "POLETJE", ang: "SUMMER"},{slo: "JESEN", ang: "AUTUMN"},{slo: "ZIMA", ang: "WINTER"}],
            "School subjects": [{slo: "SLJ", ang: "SLOVENE"},{slo: "MAT", ang: "MATHS"},{slo: "TJA", ang: "ENGLISH"},{slo: "GEO", ang: "GEOGRAPHY"},{slo: "ZGO", ang: "HISTORY"},{slo: "NAR", ang: "SCIENCE"},{slo: "≈†PO", ang: "PHYSICAL EDUCATION"},{slo: "GUM", ang: "MUSIC"},{slo: "LUM", ang: "ART"},{slo: "GOS", ang: "HOME ECONOMICS"},{slo: "KEM", ang: "CHEMISTRY"},{slo: "FIZ", ang: "PHYSICS"},{slo: "OBLIKOVANJE IN TEHNIKA", ang: "DESIGN AND TECHNOLOGY"},{slo: "BIO", ang: "BIOLOGY"},{slo: "NEM", ang: "GERMAN"},{slo: "≈†PA", ang: "SPANISH"},{slo: "ITA", ang: "ITALIAN"},{slo: "FRA", ang: "FRENCH"},{slo: "RAƒå", ang: "INFORMATION AND COMMUNICATIONS TECHNOLOGY"},{slo: "VEROUK", ang: "RELIGIOUS EDUCATION"}],
            "Dodatno": [{slo: "OBIƒåAJNE STVARI", ang: "USUAL THINGS"},{slo: "NEOBIƒåAJNE STVARI", ang: "UNUSUAL THINGS"},{slo: "PISALNI STROJ", ang: "A TYPEWRITER"},{slo: "FLIPERJI", ang: "PINBALL MACHINES"},{slo: "FIGURICE PRA≈†IƒåKOV", ang: "PIG FIGURINES"},{slo: "VRTNI PALƒåKI", ang: "GARDEN GNOMES"},{slo: "ZA OKRAS", ang: "FOR DECORATION"},{slo: "PRIJETNE≈†I PROSTOR", ang: "A MORE ENJOYABLE PLACE"},{slo: "SPRAVIJO TE V DOBRO VOLJO", ang: "THEY PUT YOU IN A GOOD MOOD"},{slo: "PRINA≈†AJO SREƒåO", ang: "THEY BRING GOOD LUCK"},{slo: "VARUJEJO TVOJ VRT", ang: "THEY PROTECT YOUR GARDEN"},{slo: "MO≈†KI", ang: "A MALE"},{slo: "≈ΩENSKA", ang: "A FEMALE"},{slo: "BRADA", ang: "A BEARD"},{slo: "NOSIJO RDEƒåE ≈†PIƒåASTE KLOBUKE", ang: "THEY WEAR RED POINTY HATS"},{slo: "DREMAJO POD DREVESOM", ang: "THEY NAP UNDER A TREE"},{slo: "PRIJETNE IN NEPRIJETNE SANJE", ang: "PLEASANT AND BAD DREAMS"},{slo: "NOƒåNA MORA", ang: "A NIGHTMARE"},{slo: "ZNOVA IN ZNOVA", ang: "AGAIN AND AGAIN"},{slo: "PEKOƒåE KOPRIVE", ang: "STINGING NETTLES"},{slo: "PRVO BERILO / ƒåITANKA", ang: "A PRIMER"},{slo: "PREVODI V RAZLIƒåNE JEZIKE", ang: "TRANSLATIONS INTO DIFFERENT LANGUAGES"},{slo: "≈†E ZLASTI, ≈†E POSEBEJ", ang: "ESPECIALLY"}]
        };

        function ustvariPosebneSklope() {
            let vse = [];
            for (let sklop in osnovniPodatki) {
                if(sklop !== "VSE BESEDE") vse = vse.concat(osnovniPodatki[sklop]);
            }
            osnovniPodatki["VSE BESEDE"] = vse.filter((v, i, a) => a.findIndex(t => t.ang.toLowerCase().trim() === v.ang.toLowerCase().trim()) === i);
        }

        let trenutniSklopIme = "";
        let trenutneBesede = [];
        let indeks = 0;
        let tockeSeje = 0;
        let zaporedniPravilni = 0;
        let razkritiIndeksi = [];

        function osveziMeni() {
            ustvariPosebneSklope();
            let zgodovina = JSON.parse(localStorage.getItem('anglescina_v3_progres')) || {};
            const meni = document.getElementById("seznam-sklopov");
            meni.innerHTML = "";
            
            for (let sklop in osnovniPodatki) {
                let skupaj = osnovniPodatki[sklop].length;
                let podatki = zgodovina[sklop] || { nauceno: [], napake: [] };
                let stNauƒçenih = osnovniPodatki[sklop].filter(b => (podatki.nauceno || []).includes(b.ang.toLowerCase().trim())).length;
                let procent = Math.round((stNauƒçenih / skupaj) * 100) || 0;
                
                let div = document.createElement("div");
                div.className = "sklop-vsebnik";
                // TU JE POPRAVEK ZA NAREKOVAJ (uporaba backtickov ` v pripraviSklop in ponastaviSklop)
                div.innerHTML = `
                    <button onclick="pripraviSklop(\`${sklop}\`)" style="background-color: ${sklop === 'VSE BESEDE' ? '#2c3e50' : '#3498db'}; color: white; width:100%; padding:12px; border-radius:8px; border:none; font-weight:bold; cursor:pointer; font-size:1.1em;">${sklop}</button>
                    <div class="statistika-tekst">Zna≈°: <span class="oznaka-ok">${stNauƒçenih}/${skupaj} (${procent}%)</span> | Napake: <span class="oznaka-napaka">${(podatki.napake || []).length}</span></div>
                    <div class="progres-bar"><div class="progres-polnilo" style="width: ${procent}%"></div></div>
                    <button class="btn-reset" onclick="ponastaviSklop(\`${sklop}\`)">Ponastavi</button>
                `;
                meni.appendChild(div);
            }
        }

        function pripraviSklop(ime) {
            if (!osnovniPodatki[ime]) return;
            trenutniSklopIme = ime;
            trenutneBesede = [...osnovniPodatki[ime]].sort(() => Math.random() - 0.5);
            indeks = 0; tockeSeje = 0; zaporedniPravilni = 0;
            prikaziZaslon("zaslon-kviz");
            osveziPrikaz();
        }

        function preveri() {
            let vnos = document.getElementById("vnos").value.toLowerCase().trim();
            let pravilna = trenutneBesede[indeks].ang.toLowerCase().trim();
            let zgodovina = JSON.parse(localStorage.getItem('anglescina_v3_progres')) || {};
            
            if (!zgodovina[trenutniSklopIme]) zgodovina[trenutniSklopIme] = { nauceno: [], napake: [] };

            let msg = document.getElementById("sporocilo");
            if (vnos === pravilna) {
                tockeSeje++; zaporedniPravilni++;
                if (!zgodovina[trenutniSklopIme].nauceno.includes(pravilna)) {
                    zgodovina[trenutniSklopIme].nauceno.push(pravilna);
                }
                zgodovina[trenutniSklopIme].napake = zgodovina[trenutniSklopIme].napake.filter(b => b.ang.toLowerCase().trim() !== pravilna);
                msg.innerHTML = `<span class='oznaka-ok'>Bravo! ‚úÖ</span>`;
                if (zaporedniPravilni % 3 === 0) {
                    msg.innerHTML += `<br><span class="pohvala-tekst">${pohvale[Math.floor(Math.random() * pohvale.length)]}</span>`;
                }
            } else {
                zaporedniPravilni = 0;
                zgodovina[trenutniSklopIme].nauceno = zgodovina[trenutniSklopIme].nauceno.filter(s => s !== pravilna);
                if (!zgodovina[trenutniSklopIme].napake.find(b => b.ang.toLowerCase().trim() === pravilna)) {
                    zgodovina[trenutniSklopIme].napake.push(trenutneBesede[indeks]);
                }
                msg.innerHTML = `<span class='oznaka-napaka'>Pravilno: ${pravilna.toUpperCase()}</span>`;
            }
            
            localStorage.setItem('anglescina_v3_progres', JSON.stringify(zgodovina));
            setTimeout(() => {
                indeks++;
                if (indeks < trenutneBesede.length) {
                    osveziPrikaz();
                } else {
                    osveziMeni();
                    prika≈æiKonec();
                }
            }, 1800);
        }

        function prikaziNamig() {
            const beseda = trenutneBesede[indeks].ang;
            if (razkritiIndeksi.length < beseda.replace(/ /g, "").length) {
                let mozne = [];
                for (let i = 0; i < beseda.length; i++) {
                    if (beseda[i] !== " " && !razkritiIndeksi.includes(i)) mozne.push(i);
                }
                if (mozne.length > 0) {
                    razkritiIndeksi.push(mozne[Math.floor(Math.random() * mozne.length)]);
                }
            }
            let izpis = "";
            for (let i = 0; i < beseda.length; i++) {
                if (beseda[i] === " ") {
                    izpis += `<span class="lovec-besed"> . . . </span>`;
                } else {
                    izpis += razkritiIndeksi.includes(i) ? beseda[i].toUpperCase() : "_";
                }
            }
            document.getElementById("sporocilo").innerHTML = `<div id="namig-tekst">${izpis}</div>`;
        }

        function preskoci() {
            let pravilna = trenutneBesede[indeks].ang.toLowerCase().trim();
            document.getElementById("sporocilo").innerHTML = `Re≈°itev: ${pravilna.toUpperCase()}`;
            zaporedniPravilni = 0;
            let zgodovina = JSON.parse(localStorage.getItem('anglescina_v3_progres')) || {};
            if (!zgodovina[trenutniSklopIme]) zgodovina[trenutniSklopIme] = { nauceno: [], napake: [] };
            zgodovina[trenutniSklopIme].nauceno = zgodovina[trenutniSklopIme].nauceno.filter(s => s !== pravilna);
            if (!zgodovina[trenutniSklopIme].napake.find(b => b.ang.toLowerCase().trim() === pravilna)) {
                zgodovina[trenutniSklopIme].napake.push(trenutneBesede[indeks]);
            }
            localStorage.setItem('anglescina_v3_progres', JSON.stringify(zgodovina));
            setTimeout(() => {
                indeks++;
                if (indeks < trenutneBesede.length) osveziPrikaz();
                else {
                    osveziMeni();
                    prika≈æiKonec();
                }
            }, 1800);
        }

        function osveziPrikaz() {
            if (!trenutneBesede[indeks]) return;
            let besedaObj = trenutneBesede[indeks];
            razkritiIndeksi = [];
            document.getElementById("ime-sklopa").innerText = trenutniSklopIme + ` | ${indeks + 1}/${trenutneBesede.length}`;
            document.getElementById("slo-beseda").innerText = besedaObj.slo;
            let emoji = emojiMapa[besedaObj.ang.toUpperCase()];
            document.getElementById("emoji-prostor").innerText = emoji ? emoji : "";
            document.getElementById("vnos").value = "";
            document.getElementById("vnos").focus();
            document.getElementById("sporocilo").innerText = "";
        }

        function prika≈æiKonec() {
            prikaziZaslon("zaslon-konec");
            document.getElementById("koncni-naslov-sklopa").innerText = `Sklop ${trenutniSklopIme} je konƒçan!`;
            let uspeh = Math.round((tockeSeje / trenutneBesede.length) * 100);
            document.getElementById("koncna-statistika").innerHTML = `Uspeh danes: <b>${tockeSeje} / ${trenutneBesede.length} (${uspeh}%)</b>`;
            if (uspeh >= 80) {
                document.getElementById("ploskanje").classList.remove("skrito");
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            } else {
                document.getElementById("ploskanje").classList.add("skrito");
            }
        }

        function ponastaviSklop(ime) {
            if(confirm(`≈Ωeli≈° izbrisati napredek za ${ime}?`)) {
                let zgodovina = JSON.parse(localStorage.getItem('anglescina_v3_progres')) || {};
                delete zgodovina[ime];
                localStorage.setItem('anglescina_v3_progres', JSON.stringify(zgodovina));
                osveziMeni();
            }
        }

        function prikaziZaslon(id) {
            ["zaslon-izbira", "zaslon-kviz", "zaslon-konec"].forEach(z => document.getElementById(z).classList.add("skrito"));
            document.getElementById(id).classList.remove("skrito");
        }

        function nazajNaMeni() { 
            osveziMeni(); 
            prikaziZaslon("zaslon-izbira"); 
        }

        osveziMeni();
        document.getElementById("vnos").addEventListener("keyup", (e) => { if(e.key === "Enter") preveri(); });
    </script>
</body>
</html>
